{% macro render_main_category_table(categories, current_view) %}
<div id="mainCategoriesTableView" class="p-4 sm:p-6 {{ '' if current_view == 'main' else 'hidden' }}">
    <div class="flex justify-between items-center mb-4">
        <div>
            <h3 class="text-lg font-medium text-gray-800">Categorías Principales</h3>
            <p class="text-sm text-gray-500">Lista de todas las categorías principales del inventario</p>
        </div>
    </div>
    <div class="table-container">
        <table class="category-table">
            <thead>
                <tr>
                    <th>Nombre</th>
                    <th>Subcategorías</th>
                    <th>Estado</th>
                    <th>Fecha de Creación</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody id="mainCategoriesTableBody">
                {% if categories %}
                    {% for category in categories %}
                        <tr>
                            <td>{{ category.nombre }}</td>
                            <td>{{ category.subcategorias | length }}</td>
                            <td data-category-id="{{ category.id }}" data-category-type="main">
                                <div class="flex items-center">
                                    <div class="relative inline-block w-14 h-7 mr-2 align-middle select-none">
                                        <input type="checkbox" id="toggle-main-{{ category.id }}" class="sr-only" {% if category.estado == 'activo' %}checked{% endif %} onchange="toggleCategoryStatus('{{ category.id }}', 'main', this.checked)">
                                        <label for="toggle-main-{{ category.id }}" class="block h-7 w-14 rounded-full cursor-pointer transition-colors duration-300 ease-in-out {% if category.estado == 'activo' %}bg-gradient-to-r from-green-400 to-emerald-500 shadow-lg{% else %}bg-gray-300{% endif %}" title="Cambiar estado de la categoría">
                                            <span class="absolute left-1 top-1 bg-white w-5 h-5 rounded-full shadow-md transition-transform duration-300 ease-in-out {% if category.estado == 'activo' %}transform translate-x-7{% else %}transform translate-x-0{% endif %} flex items-center justify-center">
                                                {% if category.estado == 'activo' %}
                                                    <svg class="w-3 h-3 text-green-500" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                                                    </svg>
                                                {% else %}
                                                    <svg class="w-3 h-3 text-gray-500" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                                                    </svg>
                                                {% endif %}
                                            </span>
                                        </label>
                                    </div>
                                </div>
                            </td>
                            <td>{{ category.created_at | format_date }}</td>
                            <td>
                                <div class="flex">
                                    <button class="action-button view" title="Ver detalles" onclick="categoriesApp.viewCategory('{{ category.id }}', 'main')">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="action-button edit" title="Editar" onclick="categoriesApp.editCategory('{{ category.id }}', 'main')">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                    {% endfor %}
                {% else %}
                    <tr>
                        <td colspan="5" class="text-center py-4 text-gray-500">No se encontraron categorías principales</td>
                    </tr>
                {% endif %}
            </tbody>
        </table>
    </div>
</div>
{% endmacro %}

{% macro render_subcategory_table(subcategories, current_view) %}
<div id="subCategoriesTableView" class="p-4 sm:p-6 {{ '' if current_view == 'sub' else 'hidden' }}">
    <div class="flex justify-between items-center mb-4">
        <div>
            <h3 class="text-lg font-medium text-gray-800">Subcategorías</h3>
            <p class="text-sm text-gray-500">Lista de todas las subcategorías del inventario</p>
        </div>
    </div>
    <div class="table-container">
        <table class="category-table">
            <thead>
                <tr>
                    <th>Nombre</th>
                    <th>Categoría Principal</th>
                    <th>Seudocategorías</th>
                    <th>Estado</th>
                    <th>Fecha de Creación</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody id="subCategoriesTableBody" class="initial-load">
                {% if subcategories %}
                    {% for subcategory in subcategories %}
                        <tr>
                            <td>{{ subcategory.nombre }}</td>
                            <td>{{ subcategory.categoria_principal_nombre }}</td>
                            <td>{{ subcategory.seudocategorias | length }}</td>
                            <td data-category-id="{{ subcategory.id }}" data-category-type="sub">
                                <div class="flex items-center">
                                    <div class="relative inline-block w-14 h-7 mr-2 align-middle select-none">
                                        <input type="checkbox" id="toggle-sub-{{ subcategory.id }}" class="sr-only" {% if subcategory.estado == 'activo' %}checked{% endif %} onchange="toggleCategoryStatus('{{ subcategory.id }}', 'sub', this.checked)">
                                        <label for="toggle-sub-{{ subcategory.id }}" class="block h-7 w-14 rounded-full cursor-pointer transition-colors duration-300 ease-in-out {% if subcategory.estado == 'activo' %}bg-gradient-to-r from-green-400 to-emerald-500 shadow-lg{% else %}bg-gray-300{% endif %}" title="Cambiar estado de la subcategoría">
                                            <span class="absolute left-1 top-1 bg-white w-5 h-5 rounded-full shadow-md transition-transform duration-300 ease-in-out {% if subcategory.estado == 'activo' %}transform translate-x-7{% else %}transform translate-x-0{% endif %} flex items-center justify-center">
                                                {% if subcategory.estado == 'activo' %}
                                                    <svg class="w-3 h-3 text-green-500" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                                                    </svg>
                                                {% else %}
                                                    <svg class="w-3 h-3 text-gray-500" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                                                    </svg>
                                                {% endif %}
                                            </span>
                                        </label>
                                    </div>
                                </div>
                            </td>
                            <td>{{ subcategory.created_at | format_date }}</td>
                            <td>
                                <div class="flex">
                                    <button class="action-button view" title="Ver detalles" onclick="categoriesApp.viewCategory('{{ subcategory.id }}', 'sub')">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="action-button edit" title="Editar" onclick="categoriesApp.editCategory('{{ subcategory.id }}', 'sub')">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                    {% endfor %}
                {% else %}
                    <tr>
                        <td colspan="6" class="text-center py-4 text-gray-500">No se encontraron subcategorías</td>
                    </tr>
                {% endif %}
            </tbody>
        </table>
    </div>
</div>
{% endmacro %}

{% macro render_pseudocategory_table(pseudocategories, current_view) %}
<div id="pseudoCategoriesTableView" class="p-4 sm:p-6 {{ '' if current_view == 'pseudo' else 'hidden' }}">
    <div class="flex justify-between items-center mb-4">
        <div>
            <h3 class="text-lg font-medium text-gray-800">Seudocategorías</h3>
            <p class="text-sm text-gray-500">Lista de todas las seudocategorías del inventario</p>
        </div>
    </div>
    <div class="table-container">
        <table class="category-table">
            <thead>
                <tr>
                    <th>Nombre</th>
                    <th>Subcategoría</th>
                    <th>Categoría Principal</th>
                    <th>Estado</th>
                    <th>Fecha de Creación</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody id="pseudoCategoriesTableBody" class="initial-load">
                {% if pseudocategories %}
                    {% for pseudo in pseudocategories %}
                        <tr>
                            <td>{{ pseudo.nombre }}</td>
                            <td>{{ pseudo.subcategoria_nombre }}</td>
                            <td>{{ pseudo.categoria_principal_nombre }}</td>
                            <td data-category-id="{{ pseudo.id }}" data-category-type="pseudo">
                                <div class="flex items-center">
                                    <div class="relative inline-block w-14 h-7 mr-2 align-middle select-none">
                                        <input type="checkbox" id="toggle-pseudo-{{ pseudo.id }}" class="sr-only" {% if pseudo.estado == 'activo' %}checked{% endif %} onchange="toggleCategoryStatus('{{ pseudo.id }}', 'pseudo', this.checked)">
                                        <label for="toggle-pseudo-{{ pseudo.id }}" class="block h-7 w-14 rounded-full cursor-pointer transition-colors duration-300 ease-in-out {% if pseudo.estado == 'activo' %}bg-gradient-to-r from-green-400 to-emerald-500 shadow-lg{% else %}bg-gray-300{% endif %}" title="Cambiar estado de la seudocategoría">
                                            <span class="absolute left-1 top-1 bg-white w-5 h-5 rounded-full shadow-md transition-transform duration-300 ease-in-out {% if pseudo.estado == 'activo' %}transform translate-x-7{% else %}transform translate-x-0{% endif %} flex items-center justify-center">
                                                {% if pseudo.estado == 'activo' %}
                                                    <svg class="w-3 h-3 text-green-500" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                                                    </svg>
                                                {% else %}
                                                    <svg class="w-3 h-3 text-gray-500" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                                                    </svg>
                                                {% endif %}
                                            </span>
                                        </label>
                                    </div>
                                </div>
                            </td>
                            <td>{{ pseudo.created_at | format_date }}</td>
                            <td>
                                <div class="flex">
                                    <button class="action-button view" title="Ver detalles" onclick="categoriesApp.viewCategory('{{ pseudo.id }}', 'pseudo')">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="action-button edit" title="Editar" onclick="categoriesApp.editCategory('{{ pseudo.id }}', 'pseudo')">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                    {% endfor %}
                {% else %}
                    <tr>
                        <td colspan="6" class="text-center py-4 text-gray-500">No se encontraron seudocategorías</td>
                    </tr>
                {% endif %}
            </tbody>
        </table>
    </div>
</div>
{% endmacro %}

<style>
    /* Estilos para el interruptor de estado */
    .toggle-checkbox:checked + .toggle-label {
        background: linear-gradient(to right, #34d399, #10b981);
        box-shadow: 0 4px 6px -1px rgba(16, 185, 129, 0.3), 0 2px 4px -1px rgba(16, 185, 129, 0.2);
    }
    
    .toggle-checkbox:checked + .toggle-label span {
        transform: translateX(1.75rem);
    }
</style>